[gd_scene format=3 uid="uid://5v7a0ra4elxi"]

[ext_resource type="Script" uid="uid://52c0r8owfv4p" path="res://scenes/gameplay_screen.gd" id="1_25g3s"]
[ext_resource type="PackedScene" uid="uid://dfvx4shbdy2i0" path="res://scenes/camera_rig.tscn" id="1_nl8x0"]
[ext_resource type="PackedScene" uid="uid://ehbcmyfcurbu" path="res://scenes/ground.tscn" id="2_gej26"]
[ext_resource type="PackedScene" uid="uid://cbio2ymsjjt45" path="res://scenes/parallax_2d_layer.tscn" id="2_mcs8y"]
[ext_resource type="PackedScene" uid="uid://b1q5gjhbfsuaq" path="res://scenes/player.tscn" id="5_157wf"]
[ext_resource type="Texture2D" uid="uid://jtdhvpki0hm3" path="res://assets/packages/Glacial-mountains-parallax-background_vnitti/Layers/sky.png" id="8_mcs8y"]
[ext_resource type="Texture2D" uid="uid://cgke3ahrw3g0a" path="res://assets/packages/Glacial-mountains-parallax-background_vnitti/Layers/glacial_mountains_lightened.png" id="9_6gaaa"]
[ext_resource type="Texture2D" uid="uid://cujsmm07hnsej" path="res://assets/packages/Glacial-mountains-parallax-background_vnitti/Layers/clouds_mg_1.png" id="10_cjr5t"]
[ext_resource type="Texture2D" uid="uid://pi2m5lc3c6fp" path="res://assets/packages/Glacial-mountains-parallax-background_vnitti/Layers/clouds_mg_2.png" id="11_itntn"]
[ext_resource type="Texture2D" uid="uid://c6nr8ekrc61va" path="res://assets/packages/Glacial-mountains-parallax-background_vnitti/Layers/clouds_mg_3.png" id="12_7ocsb"]
[ext_resource type="Script" uid="uid://bx6f3uaf823k7" path="res://scenes/encounters/encounter_runner.gd" id="13_7ocsb"]
[ext_resource type="Script" uid="uid://b7muo30j743j7" path="res://scenes/encounters/enemy_spawner.gd" id="14_6demn"]
[ext_resource type="Script" uid="uid://cs50vfhsfsego" path="res://scenes/encounters/stage_director.gd" id="14_7ocsb"]
[ext_resource type="Resource" uid="uid://2j8kvtmayt4e" path="res://resources/encounters/templates/demo_template.tres" id="15_aagjl"]
[ext_resource type="Script" uid="uid://dbp6h4gvlg87c" path="res://scenes/encounters/encounter.resource.gd" id="15_qfdku"]
[ext_resource type="Resource" uid="uid://fcxqais0xfjm" path="res://resources/encounters/pool/demo_pool.tres" id="16_gnb8g"]
[ext_resource type="Resource" uid="uid://cksohj4gw0hg4" path="res://resources/encounters/boss_dreadnought.tres" id="20_clvjq"]
[ext_resource type="PackedScene" uid="uid://noqc6sl7fqcx" path="res://scenes/outro_cutscene.tscn" id="20_t1iya"]
[ext_resource type="Resource" uid="uid://bdi7xch2is4fp" path="res://resources/encounters/difficulty/normal.difficulty_profile.tres" id="22_pw0ia"]
[ext_resource type="PackedScene" uid="uid://cvko0bycqpbyo" path="res://scenes/intro_cutscene.tscn" id="23_baarm"]

[node name="GameplayScreen" type="CanvasLayer" unique_id=1759060554]
script = ExtResource("1_25g3s")

[node name="CameraRig" parent="." unique_id=2025045557 instance=ExtResource("1_nl8x0")]
follow_strength = 1.0
min_horizon_ratio = 0.85
max_horizon_ratio = 0.15

[node name="World" type="Node" parent="." unique_id=242347781]

[node name="WorldLayer" type="CanvasLayer" parent="." unique_id=1382012560]

[node name="Sky" parent="WorldLayer" unique_id=1553533872 instance=ExtResource("2_mcs8y")]
parallax_z_offset = -10000.0

[node name="Sprite2D" type="Sprite2D" parent="WorldLayer/Sky" unique_id=119735018]
position = Vector2(0, -72)
scale = Vector2(1.9722223, 1.9722222)
texture = ExtResource("8_mcs8y")

[node name="Mountains" parent="WorldLayer" unique_id=2112781111 instance=ExtResource("2_mcs8y")]
position = Vector2(0, -40)
parallax_z_offset = -5000.0
repeat_x = true

[node name="Sprite2D" type="Sprite2D" parent="WorldLayer/Mountains" unique_id=901453193]
position = Vector2(0, -104)
texture = ExtResource("9_6gaaa")

[node name="Cloud3" parent="WorldLayer" unique_id=144826513 instance=ExtResource("2_mcs8y")]
position = Vector2(0, -54)
parallax_z_offset = -2500.0
repeat_x = true

[node name="Sprite2D" type="Sprite2D" parent="WorldLayer/Cloud3" unique_id=26751890]
position = Vector2(0, -104)
texture = ExtResource("12_7ocsb")

[node name="Cloud2" parent="WorldLayer" unique_id=1033381634 instance=ExtResource("2_mcs8y")]
position = Vector2(0, -54)
repeat_x = true

[node name="Sprite2D" type="Sprite2D" parent="WorldLayer/Cloud2" unique_id=1480389750]
position = Vector2(0, -104)
texture = ExtResource("11_itntn")

[node name="Cloud1" parent="WorldLayer" unique_id=539629075 instance=ExtResource("2_mcs8y")]
position = Vector2(0, -54)
parallax_z_offset = -1500.0
repeat_x = true

[node name="Sprite2D" type="Sprite2D" parent="WorldLayer/Cloud1" unique_id=1214918953]
position = Vector2(0, -104)
texture = ExtResource("10_cjr5t")

[node name="Ground" parent="WorldLayer" unique_id=1065127099 instance=ExtResource("2_gej26")]

[node name="ObjectsLayer" type="CanvasLayer" parent="." unique_id=1463780327]
layer = 2

[node name="Player" parent="ObjectsLayer" unique_id=1077760697 groups=["player"] instance=ExtResource("5_157wf")]
modulate = Color(1, 1, 1, 0.42745098)
speed = 200.0
fixed_sprite = true

[node name="UILayer" type="CanvasLayer" parent="." unique_id=731936281]
layer = 3

[node name="Mechanics" type="Node" parent="." unique_id=1333706372]

[node name="EncounterRunner" type="Node" parent="Mechanics" unique_id=749903038 node_paths=PackedStringArray("spawner")]
script = ExtResource("13_7ocsb")
autostart = true
spawner = NodePath("../EnemySpawner")
metadata/_custom_type_script = "uid://bx6f3uaf823k7"

[node name="StageDirector" type="Node" parent="Mechanics" unique_id=1937507698 node_paths=PackedStringArray("runner", "player")]
unique_name_in_owner = true
script = ExtResource("14_7ocsb")
runner = NodePath("../EncounterRunner")
player = NodePath("../../ObjectsLayer/Player")
encounters_override = Array[ExtResource("15_qfdku")]([ExtResource("20_clvjq")])
run_seed = 2
rail_speed = 50.0
modifiers = PackedStringArray()
stage_template = ExtResource("15_aagjl")
encounter_pool = ExtResource("16_gnb8g")
difficulty_profile = ExtResource("22_pw0ia")

[node name="EnemySpawner" type="Node" parent="Mechanics" unique_id=54553492 node_paths=PackedStringArray("world", "camera_rig")]
script = ExtResource("14_6demn")
world = NodePath("../../ObjectsLayer")
camera_rig = NodePath("../../CameraRig")
metadata/_custom_type_script = "uid://b7muo30j743j7"

[node name="IntroCutscene" parent="." unique_id=620946400 instance=ExtResource("23_baarm")]
unique_name_in_owner = true
layer = 4

[node name="OutroCutscene" parent="." unique_id=716920073 instance=ExtResource("20_t1iya")]
unique_name_in_owner = true

[connection signal="stage_finished" from="Mechanics/StageDirector" to="." method="_on_stage_director_stage_finished"]
